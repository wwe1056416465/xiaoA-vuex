(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-template-tem_detial-tem_de"],{"19bb":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"uni-page-body[data-v-3f9861ee]{background-color:#eee}.content[data-v-3f9861ee]{position:relative}.tede_all[data-v-3f9861ee]{padding:18px;background-color:#fff}.tede_con[data-v-3f9861ee]{color:#999;font-size:12px;margin:3px 0}uni-textarea[data-v-3f9861ee]{width:100%;border:1px solid hsla(0,0%,88.2%,.88);border-radius:10px;height:100px;padding:10px}.tede_audio[data-v-3f9861ee]{position:relative;text-align:center;color:#ccc}.tede_bottom[data-v-3f9861ee]{position:fixed;padding:5px 0;bottom:0;background-color:#fff;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.tede_bottom uni-button[data-v-3f9861ee]{font-size:14px;width:100px;height:36px;line-height:36px}.recording[data-v-3f9861ee]{padding-top:60px;text-align:center;text-align:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.recording-box[data-v-3f9861ee]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.record-content[data-v-3f9861ee]{position:relative;display:inline-block}.record-content .btn[data-v-3f9861ee]{-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%;border:rgba(0,0,0,0);padding:0;background:none;border:none}.record-img[data-v-3f9861ee]{width:100px;height:100px;border:1px solid #ddd;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.record-img.active[data-v-3f9861ee]{background-color:#007aff}.recording-time[data-v-3f9861ee]{text-align:center;font-size:%?40?%;color:#1296db}.record-img uni-image[data-v-3f9861ee]{display:inline-block;width:40px;height:50px;margin-top:30px}.animation1[data-v-3f9861ee]{width:140px;height:140px;border-radius:50%;border:1px solid #3691ff;position:absolute;top:-20px;left:-20px;-webkit-animation:animation1-data-v-3f9861ee .5s ease 0s infinite alternate}.animation2[data-v-3f9861ee]{width:120px;height:120px;border-radius:50%;border:1px solid #3691ff;position:absolute;top:-10px;left:-10px;-webkit-animation:animation2-data-v-3f9861ee .5s ease 0s infinite alternate}.record-state[data-v-3f9861ee]{margin:0 10px;color:#6ac96a}@-webkit-keyframes animation1-data-v-3f9861ee{0%{opacity:0;width:100px;height:100px;position:absolute;top:0;left:0}to{opacity:.6;width:140px;height:140px}}@keyframes animation1-data-v-3f9861ee{0%{opacity:0;width:100px;height:100px;position:absolute;top:0;left:0}to{opacity:.6;width:140px;height:140px}}@-webkit-keyframes animation2-data-v-3f9861ee{0%{opacity:0;width:100px;height:100px;position:absolute;top:0;left:0}to{opacity:.6;width:120px;height:120px}}@keyframes animation2-data-v-3f9861ee{0%{opacity:0;width:100px;height:100px;position:absolute;top:0;left:0}to{opacity:.6;width:120px;height:120px}}.record[data-v-3f9861ee]{margin-top:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:40px}.record .voice[data-v-3f9861ee]{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:150px;height:40px;border:1px solid #eee;border-radius:10px}.icon-voice uni-image[data-v-3f9861ee]{display:inline-bock;width:20px;height:20px;padding:10px}.time[data-v-3f9861ee]{width:100%;line-height:40px;padding:0 10px;color:#3691ff;\n/* \t\tmargin-left:10px;\n */font-size:12px}.icon-delet[data-v-3f9861ee]{display:inline-block;width:45px;height:45px}body.?%PAGE?%[data-v-3f9861ee]{background-color:#eee}",""])},"1ac9":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"tede_all"},[i("v-uni-view",{staticClass:"tede_ti",staticStyle:{"font-size":"14px"}},[e._v(e._s(e.nodename))]),i("v-uni-view",{staticClass:"tede_con"},[e._v("剩余"),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.zero,expression:"zero"}]},[e._v("0")]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.one,expression:"one"}]},[e._v("1")]),e._v("条待录音"),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],staticClass:"record-state"},[e._v("已录制")])],1),i("v-uni-view",{staticClass:"tede_tarea"},[i("v-uni-view",{staticStyle:{"font-size":"12px",border:"1px solid #EEE","border-radius":"10px",padding:"12px","min-height":"100px"}},[e._v(e._s(e.teoneinfo.text))])],1),e.hasRecord?i("v-uni-view",{staticClass:"record"},[i("v-uni-view",{staticClass:"voice",on:{click:function(t){t=e.$handleEvent(t),e.playVoice(t)}}},[i("v-uni-view",{staticClass:"icon-voice"},[i("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:!e.playing,expression:"!playing"}],attrs:{src:"../../../static/image/voice-icon@3x.png"}}),i("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],attrs:{src:"../../../static/image/voice-icon-bofang@3x.gif"}})],1),i("v-uni-text",{staticClass:"time"},[e._v(e._s(e.duration)),i("v-uni-text",[e._v("s")])],1)],1),i("v-uni-image",{staticClass:"icon-delet",attrs:{src:"../../../static/image/delet@3x.png"},on:{click:function(t){t=e.$handleEvent(t),e.deletRecord(t)}}})],1):e._e(),i("v-uni-view",{staticClass:"tede_audio"},[i("v-uni-view",{staticClass:"recording"},[i("v-uni-view",{staticClass:"to-record"},[i("v-uni-view",{staticClass:"record-content"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"animation1"}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:" animation2"}),i("v-uni-button",{staticClass:"btn",on:{touchstart:function(t){t=e.$handleEvent(t),e.startRecord()},touchend:function(t){t=e.$handleEvent(t),e.endRecord(t)}}},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"record-img "},[i("v-uni-image",{attrs:{src:"../../../static/image/voice@3x.png"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"record-img active"},[i("v-uni-image",{attrs:{src:"../../../static/image/voice_active@3x.png"}})],1)],1)],1)],1),i("v-uni-view",{staticStyle:{padding:"20px"}},[e._v("按住说话")])],1)],1)],1),i("v-uni-view",{staticClass:"tede_bottom"},[i("v-uni-button",{attrs:{type:"primary",plain:"true"},on:{click:function(t){t=e.$handleEvent(t),e.prepage()}}},[e._v("上一页")]),i("v-uni-button",{attrs:{type:"primary",disabled:e.isButtonDisabled},on:{click:function(t){t=e.$handleEvent(t),e.saveaudia(e.teoneinfo.id,e.teoneinfo.callflowid,e.teoneinfo.status,e.teoneinfo.type,e.teoneinfo.text)}}},[e._v("保存录音")]),i("v-uni-button",{attrs:{type:"primary",plain:"true"},on:{click:function(t){t=e.$handleEvent(t),e.nextpage()}}},[e._v("下一页")])],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"597b":function(e,t,i){"use strict";var a=i("8103"),n=i.n(a);n.a},"6b1e":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("84e6"));function n(e){return e&&e.__esModule?e:{default:e}}var o=uni.getRecorderManager(),s=uni.createInnerAudioContext(),d=uni.getStorageSync("yuming");s.autoplay=!0;var r={data:function(){return{playing:!1,recording:!1,duration:"",voicePath:"",hasRecord:!1,title:!1,isButtonDisabled:!1,id:"",callflowid:"",teoneinfo:{},audiotext:"",fileaudio:"",plays:"",nodename:"",filepath:"",filenamesrc:"",yuanvoice:"",filename:"",zero:"",one:"",pages:0,pageaulen:"",type:"",getJumpTargets:"",isSuccess:!1}},onLoad:function(e){this.nodename=uni.getStorageSync("nodename"),this.callflowid=e.callflowid,this.id=e.id,this.pages=e.pages,this.type=e.type,this.getoneinfo();var t=this;o.onStop(function(e){t.fileaudio=JSON.stringify(e),this.voiceList=e,t.voicePath=e.tempFilePath,t.duration=Math.floor(e.duration/1e3),0!=t.duration&&(t.hasRecord=!0,t.title=!0)})},onHide:function(){s.pause(),this.playing=!1},onUnload:function(){s.pause(),this.playing=!1},methods:{getoneinfo:function(){var e=this,t={id:this.id,callflowid:this.callflowid,access_token:this.$store.state.token};(0,a.default)("/adminspa/audio/getOneInfoById",t).then(function(t){e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.one=!0,e.zero=!1)})},startRecord:function(){this.isSuccess=!1,this.isButtonDisabled=!1,this.recording=!0,o.start()},endRecord:function(){this.recording=!1,o.stop()},playVoice:function(){var e=this;this.playing=!this.playing,s.autoplay=!0,s.loop=!1,s.obeyMuteSwitch=!0,this.filenamesrc=d+"/adminspa/File/readFile?filename="+this.filepath+this.filename+"&access_token="+this.$store.state.token,this.voicePath?(s.src=this.voicePath,this.playing?s.play():s.pause()):""!=this.filepath&&""!=this.filename?(s.src=this.filenamesrc,this.playing?s.play():s.pause()):this.playing=!1,s.onEnded(function(t){e.playing=!1}),s.onError(function(t){e.playing=!1}),s.onStop(function(t){e.playing=!1})},deletRecord:function(){var e=this;wx.showModal({title:"提示",content:"是否删除?",success:function(t){t.confirm?(e.voicePath="",e.hasRecord=!1):t.cancel&&console.log("用户点击取消")}})},saveaudia:function(e,t,i,n,o){var s=this;uni.uploadFile({url:d+"/adminspa/audio/upload?callflowid="+this.callflowid+"&access_token="+this.$store.state.token,method:"POST",filePath:this.voicePath,name:"file",header:{charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(n){var d=JSON.parse(n.data),r=d.data,l=r.filename,c=r.filepath,p={id:e,callflowid:t,status:i,filepath:c,filename:l,type:"1",text:o,textbak:"",access_token:s.$store.state.token};(0,a.default)("/adminspa/audio/upvoice",p).then(function(e){0==s.duration?uni.showToast({title:"录音太短",duration:2e3}):(uni.showToast({title:"保存成功",duration:2e3}),s.hasRecord=!0,s.isButtonDisabled=!0,s.one=!1,s.voicePath&&(s.isSuccess=!0),s.zero=!0)})},fail:function(e){}})},pre:function(){var e=this;if(this.pages<=0)return uni.showToast({title:"暂无上一条",duration:2e3,icon:"none"}),void(this.fistFlag&&(this.pages=parseInt(this.pages)+1));this.voicePath="",this.duration="",this.pages=this.pages-1,1==this.type?this.getJumpTargets="/adminspa/rprocess/getJumpTargets":2==this.type||4==this.type?this.getJumpTargets="/adminspa/questions/index?type=2":3==this.type&&(this.getJumpTargets="/adminspa/special/index?type=3");var t={callflowid:this.callflowid,access_token:this.$store.state.token};(0,a.default)(this.getJumpTargets,t).then(function(t){var i,n;if(1==e.type){t.data.data.list[e.pages];i=t.data.data.list[e.pages].id,n=t.data.data.list[e.pages].callflowid}else{t.data.data[e.pages];i=t.data.data[e.pages].id,n=t.data.data[e.pages].callflowid}var o={id:i,callflowid:n,access_token:e.$store.state.token};return(0,a.default)("/adminspa/rprocess/getNodeInfo",o)}).then(function(t){var i;if(e.pageaulen=t.data.data.audio.length,0==e.pageaulen)return 0==e.pages&&(e.fistFlag=!0),void e.prepage();if(e.audiotype=t.data.data.audio[0].type,1==e.audiotype||2==e.audiotype){i=t.data.data.audio[0].fileid,t.data.data.audio[0].callflowid,e.nodename=t.data.data.name;var n={id:i,callflowid:e.audiocow,access_token:e.$store.state.token};return(0,a.default)("/adminspa/audio/getOneInfoById",n)}return 0==e.pages&&(e.fistFlag=!0),void e.prepage()}).then(function(t){t&&(wx.showLoading({title:"录音加载中",duration:200}),e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.nodename=e.nodename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.hasRecord=!1,e.one=!0,e.zero=!1))})},prepage:function(){var e=this;this.isSuccess||""==this.voicePath?(s.pause(),this.playing=!1,this.pre()):uni.showModal({title:"温馨提示",content:"录音未保存",showCancel:!0,confirmText:"去保存",cancelText:"不保存",success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&(e.isSuccess=!1,s.pause(),e.playing=!1,e.pre())}})},next:function(){var e=this,t=uni.getStorageSync("total")-1;if(this.pages>=t)return uni.showToast({title:"暂无下一条",duration:2e3,icon:"none"}),void(this.lastFlag&&(this.pages=parseInt(this.pages)-1));this.voicePath="",this.duration="",this.pages=parseInt(this.pages)+1,1==this.type?this.getJumpTargets="/adminspa/rprocess/getJumpTargets":2==this.type?this.getJumpTargets="/adminspa/questions/index?type=2":3==this.type&&(this.getJumpTargets="/adminspa/special/index?type=3");var i={callflowid:this.callflowid,access_token:this.$store.state.token};(0,a.default)(this.getJumpTargets,i).then(function(t){var i,n;if(1==e.type){t.data.data.list[e.pages];i=t.data.data.list[e.pages].id,n=t.data.data.list[e.pages].callflowid}else{t.data.data[e.pages];i=t.data.data[e.pages].id,n=t.data.data[e.pages].callflowid}var o={id:i,callflowid:n,access_token:e.$store.state.token};return(0,a.default)("/adminspa/rprocess/getNodeInfo",o)}).then(function(i){var n;if(e.pageaulen=i.data.data.audio.length,0==e.pageaulen)return e.pages==t&&(e.lastFlag=!0),void e.nextpage();if(e.audiotype=i.data.data.audio[0].type,1==e.audiotype||2==e.audiotype){n=i.data.data.audio[0].fileid,i.data.data.audio[0].callflowid,e.nodename=i.data.data.name;var o={id:n,callflowid:e.audiocow,access_token:e.$store.state.token};return(0,a.default)("/adminspa/audio/getOneInfoById",o)}return e.pages==t&&(e.lastFlag=!0),void e.nextpage()}).then(function(t){t&&(wx.showLoading({title:"录音加载中",duration:200}),e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.nodename=e.nodename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.hasRecord=!1,e.one=!0,e.zero=!1))})},nextpage:function(){var e=this;this.isSuccess||""==this.voicePath?(s.pause(),this.playing=!1,this.next()):uni.showModal({title:"温馨提示",content:"录音未保存",showCancel:!0,confirmText:"去保存",cancelText:"不保存",success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&(e.isSuccess=!1,e.playing=!1,s.pause(),e.next())}})}}};t.default=r},8103:function(e,t,i){var a=i("19bb");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("4376b4b0",a,!0,{sourceMap:!1,shadowMode:!1})},"84e6":function(e,t,i){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",a=uni.getStorageSync("yuming");if("GET"===i){var n="";return Object.keys(t).forEach(function(e){n+=e+"="+t[e]+"&"}),""!==n&&(n=n.substring(0,n.lastIndexOf("&")),e=e+"?"+n),new Promise(function(t,n){uni.request({url:a+e,method:i,header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(e){t(e)},fail:function(e){console.log("errrr"),uni.navigateTo({url:"/pages/login/login"}),n(e)}})})}return new Promise(function(n,o){uni.request({url:a+e,method:i,header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:t,success:function(e){n(e)},fail:function(e){console.log("errrr"),uni.navigateTo({url:"/pages/login/login"}),o(e)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"90a1":function(e,t,i){"use strict";i.r(t);var a=i("6b1e"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},c560:function(e,t,i){"use strict";i.r(t);var a=i("1ac9"),n=i("90a1");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("597b");var s=i("2877"),d=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"3f9861ee",null);t["default"]=d.exports}}]);