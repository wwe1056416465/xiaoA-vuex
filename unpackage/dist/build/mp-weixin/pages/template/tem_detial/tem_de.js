(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/template/tem_detial/tem_de"],{"32ff":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})},"90a1":function(t,e,a){"use strict";a.r(e);var i=a("f144"),o=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=o.a},9257:function(t,e,a){},bfcf:function(t,e,a){"use strict";var i=a("9257"),o=a.n(i);o.a},c560:function(t,e,a){"use strict";a.r(e);var i=a("32ff"),o=a("90a1");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("bfcf");var n=a("2877"),d=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=d.exports},f144:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=t.getRecorderManager(),i=t.createInnerAudioContext();i.autoplay=!0;var o={data:function(){return{playing:!1,recording:!1,duration:"",voicePath:"",hasRecord:!1,title:!1,isButtonDisabled:!1,id:"",callflowid:"",teoneinfo:{},audiotext:"",fileaudio:"",plays:"",nodename:"",filepath:"",filenamesrc:"",yuanvoice:"",filename:"",zero:"",one:"",pages:"",pageaulen:"",type:"",getJumpTargets:""}},onLoad:function(e){this.nodename=t.getStorageSync("nodename"),this.callflowid=e.callflowid,this.id=e.id,this.pages=e.pages,this.type=e.type,this.getoneinfo();var i=this;a.onStop(function(t){i.fileaudio=JSON.stringify(t),this.voiceList=t,i.voicePath=t.tempFilePath,i.duration=Math.round(t.duration/1e3),0!=i.duration&&(i.hasRecord=!0,i.title=!0)})},methods:{getoneinfo:function(){var e=this;t.request({url:this.$url+"adminspa/audio/getOneInfoById",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:this.id,callflowid:this.callflowid,access_token:this.$store.state.token},success:function(t){e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.one=!0,e.zero=!1)}})},startRecord:function(){this.isButtonDisabled=!1,this.recording=!0,a.start()},endRecord:function(){this.recording=!1,a.stop()},playVoice:function(){var t=this;this.playing=!this.playing,i.autoplay=!0,i.loop=!1,i.obeyMuteSwitch=!0,this.filenamesrc=this.$url+"adminspa/File/readFile?filename="+this.filepath+this.filename+"&access_token="+this.$store.state.token,this.voicePath?(i.src=this.voicePath,this.playing?i.play():i.pause()):this.filenamesrc&&(i.src=this.filenamesrc,this.playing?i.play():i.pause()),i.onEnded(function(e){t.playing=!1}),i.onError(function(e){t.playing=!1}),i.onStop(function(e){t.playing=!1})},deletRecord:function(){var t=this;wx.showModal({title:"提示",content:"是否删除?",success:function(e){e.confirm?(t.voicePath="",t.hasRecord=!1):e.cancel&&console.log("用户点击取消")}})},saveaudia:function(e,a,i,o,s){var n=this;t.uploadFile({url:this.$url+"adminspa/audio/upload?callflowid="+this.callflowid+"&access_token="+this.$store.state.token,method:"POST",filePath:this.voicePath,name:"file",header:{charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(o){var d=JSON.parse(o.data),l=d.data,u=l.filename,r=l.filepath;t.request({url:n.$url+"adminspa/audio/upvoice",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:e,callflowid:a,status:i,filepath:r,filename:u,type:"1",text:s,textbak:"",access_token:n.$store.state.token},success:function(e){0==n.duration?t.showToast({title:"录音太短",duration:2e3}):(t.showToast({title:"保存成功",duration:2e3}),n.isButtonDisabled=!0,n.one=!1,n.zero=!0)}})},fail:function(t){}})},prepage:function(){var e=this;if(this.pages<=0)return t.showToast({title:"暂无上一条",duration:2e3,icon:"none"}),!1;this.pages=this.pages-1,1==this.type?this.getJumpTargets=this.$url+"adminspa/rprocess/getJumpTargets":2==this.type||4==this.type?this.getJumpTargets=this.$url+"adminspa/questions/index?type=2":3==this.type&&(this.getJumpTargets=this.$url+"adminspa/special/index?type=3"),t.request({url:this.getJumpTargets,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{callflowid:this.callflowid,access_token:this.$store.state.token},success:function(a){var i,o;if(1==e.type){a.data.data.list[e.pages];i=a.data.data.list[e.pages].id,o=a.data.data.list[e.pages].callflowid}else{a.data.data[e.pages];i=a.data.data[e.pages].id,o=a.data.data[e.pages].callflowid}t.request({url:e.$url+"adminspa/rprocess/getNodeInfo",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:i,callflowid:o,access_token:e.$store.state.token},success:function(a){var i;return e.pageaulen=a.data.data.audio.length,0!=e.pageaulen&&(e.audiotype=a.data.data.audio[0].type,(1==e.audiotype||2==e.audiotype)&&(i=a.data.data.audio[0].fileid,a.data.data.audio[0].callflowid,e.nodename=a.data.data.name,void t.request({url:e.$url+"adminspa/audio/getOneInfoById",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:i,callflowid:e.audiocow,access_token:e.$store.state.token},success:function(t){wx.showLoading({title:"录音加载中",duration:200}),e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.nodename=e.nodename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.one=!0,e.zero=!1)}})))}})}})},nextpage:function(){var e=this,a=t.getStorageSync("total")-1;if(this.pages>=a)return t.showToast({title:"暂无下一条",duration:2e3,icon:"none"}),!1;this.pages=parseInt(this.pages)+1,1==this.type?this.getJumpTargets=this.$url+"adminspa/rprocess/getJumpTargets":2==this.type?this.getJumpTargets=this.$url+"adminspa/questions/index?type=2":3==this.type&&(this.getJumpTargets=this.$url+"adminspa/special/index?type=3"),t.request({url:this.getJumpTargets,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{callflowid:this.callflowid,access_token:this.$store.state.token},success:function(a){var i,o;if(1==e.type){a.data.data.list[e.pages];i=a.data.data.list[e.pages].id,o=a.data.data.list[e.pages].callflowid}else{a.data.data[e.pages];i=a.data.data[e.pages].id,o=a.data.data[e.pages].callflowid}t.request({url:e.$url+"adminspa/rprocess/getNodeInfo",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:i,callflowid:o,access_token:e.$store.state.token},success:function(a){var i;return e.pageaulen=a.data.data.audio.length,0!=e.pageaulen&&(e.audiotype=a.data.data.audio[0].type,(1==e.audiotype||2==e.audiotype)&&(i=a.data.data.audio[0].fileid,a.data.data.audio[0].callflowid,e.nodename=a.data.data.name,void t.request({url:e.$url+"adminspa/audio/getOneInfoById",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},data:{id:i,callflowid:e.audiocow,access_token:e.$store.state.token},success:function(t){wx.showLoading({title:"录音加载中",duration:200}),e.teoneinfo=t.data.data,e.filepath=t.data.data.filepath,e.filename=t.data.data.filename,e.nodename=e.nodename,e.filename?(e.hasRecord=!0,e.title=!0,e.zero=!0,e.one=!1,e.isButtonDisabled=!0):(e.one=!0,e.zero=!1)}})))}})}})}}};e.default=o}).call(this,a("543d")["default"])}},[["e661","common/runtime","common/vendor"]]]);