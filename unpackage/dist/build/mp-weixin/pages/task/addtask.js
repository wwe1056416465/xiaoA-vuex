(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/addtask"],{"3ba5":function(t,e,n){"use strict";n.r(e);var a=n("766b"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},"60db":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"6fb0":function(t,e,n){"use strict";var a=n("70d2"),i=n.n(a);i.a},"70d2":function(t,e,n){},"766b":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("9dcb"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){return Promise.all([n.e("common/vendor"),n.e("components/rattenking-dtpicker/rattenking-dtpicker")]).then(n.bind(null,"0fd2"))},o={components:{ruiDatePicker:s},data:function(){return{title:"picker",array:[],index:0,array2:[],index2:0,date:"",array3:[],index3:0,results:[{value:104,name:"关机",xuanzhong:!0},{value:109,name:"来电提醒",xuanzhong:!0},{value:110,name:"稍后再拨",xuanzhong:!0},{value:105,name:"停机",xuanzhong:!0},{value:111,name:"关机",xuanzhong:!0},{value:104,name:"无法接通",xuanzhong:!0},{value:108,name:"正在通话中",xuanzhong:!0},{value:102,name:"用户正忙",xuanzhong:!0},{value:103,name:"用户拒接",xuanzhong:!0},{value:112,name:"欠费",xuanzhong:!0},{value:101,name:"无人应答",xuanzhong:!0}],items:[{value:"1",name:"是"},{value:"3",name:"否"}],current:1,items2:[{value:"1",name:"是"},{value:"0",name:"否"}],current2:1,isAllCheck:!1,callNum:1,callStep:"",timeUnit:"分钟",jobName:"",callflowIds:[],callflowId:"",savedFilePath:"",childIds:[],childid:"",phones:[],phone:"",valuetime:"",taskRamk:"",file:"",mais:[],mai:"",retrycondition1:"",num:1,calleeno:""}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(){this.date=this.getCurrentDate(),this.valuetime=this.getCurrentDate(),this.getChlidList()},methods:{save:function(){var e={};if(e.jobname=this.jobName,e.userid=this.childid,e.calleeno=this.calleeno,e.callflowid=this.callflowId,e.callerno=this.phone,e.description=this.taskRamk,e.access_token=this.$store.state.token,e.maxobline=this.mai,this.jobName&&this.childid&&this.calleeno&&this.callflowId&&this.phone||t.showModal({title:"温馨提示",content:"必填项不能为空",showCancel:!1,confirmText:"确定",success:function(t){t.confirm}}),"3"==this.items[this.current].value){e.open=this.items[this.current].value,e.timedstart=this.valuetime;var n=(0,a.default)(this.valuetime,"YYYY-MM-DD HH:mm:ss").valueOf(),i=(0,a.default)(this.date,"YYYY-MM-DD HH:mm:ss").valueOf();n<i&&t.showModal({title:"温馨提示",content:"不能选择比当前时间早的时间",showCancel:!1,confirmText:"确定",success:function(t){t.confirm}})}else e.open=1;if(1==this.items2[this.current2].value){e.autoretry=1;var s=0,o="";this.results.some(function(t){t.xuanzhong&&(s+=1,o+=t.value+",")}),0==s?t.showModal({title:"温馨提示",content:"请至少选择一个通话结果",showCancel:!1,confirmText:"确定",success:function(t){t.confirm}}):(o=o.substring(0,o.length-1),e.retrycondition1=o),this.callNum?e.retrytime=this.callNum:t.showModal({title:"温馨提示",content:"请输入重呼次数",showCancel:!1,confirmText:"确定",success:function(t){t.confirm}}),"小时"==this.timeUnit&&(this.callStep=60*this.callStep+""),e.retryinterval=this.callStep}else e.autoretry=0;t.request({url:this.$url+"adminspa/marketing/add.html",method:"POST",data:e,header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(e){try{t.setStorageSync("addtask","ok"),t.showModal({title:"温馨提示",content:e.data.msg,showCancel:!1,confirmText:"确定",success:function(t){t.confirm}})}catch(n){}}})},AllCheck:function(){var t=this;this.isAllCheck=!this.isAllCheck,this.results.some(function(e){e.xuanzhong=t.isAllCheck})},checkResult:function(t){this.results.some(function(e,n){n==t&&(e.xuanzhong=!e.xuanzhong)})},toggleUnit:function(){"分钟"==this.timeUnit?this.timeUnit="小时":"小时"==this.timeUnit&&(this.timeUnit="分钟")},bindChange:function(t){this.valuetime=t,console.log(this.valuetime)},bindCancel:function(t){console.log("激活取消函数")},getChlidList:function(){var e=this;t.request({url:this.$url+"adminspa/member/getchildlist.html",data:{userid:this.$store.state.userInfo.userid,access_token:this.$store.state.token},header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(t){var n=t.data.data;console.log(n),e.array2=[];for(var a=0;a<n.length-1;a++)e.array2.push(n[a].username),e.childIds.push(n[a].userid),e.mais.push(n[a].mn_ai);e.array2.unshift("请选择子账号"),e.childIds.unshift(""),e.mais.unshift("")}})},getcallflowlist:function(){},project_sn:function(t){console.log("picker发送选择改变，携带值为："+t.target.value),this.index=t.target.value,this.callflowId=this.callflowIds[t.target.value]},choose_callerno:function(t){this.index3=t.target.value,this.phone=this.phones[t.target.value],console.log(this.phone)},choose_account:function(e){var n=this;this.index2=e.target.value,this.childid=this.childIds[this.index2],this.mai=this.mais[this.index2],this.array=[],this.array3=[],t.request({url:this.$url+"adminspa/phone/getuserphone.html",data:{useradminid:this.childid,access_token:this.$store.state.token},header:{"Content-Type":"application/x-www-form-urlencoded",charset:"utf-8","X-Requested-With":"XMLhttpRequest"},success:function(t){for(var e=t.data.data.callflow,a=t.data.data.phone,i=0;i<e.length;i++)n.array.push(e[i].flowname),n.callflowIds.push(e[i].id);n.array.unshift("请选择话术模板"),n.callflowIds.unshift("");for(var s=0;s<a.length;s++)n.array3.push(a[s].phoneno),n.phones.push(a[s].phoneno);n.array3.unshift("请选择主叫号"),n.phones.unshift("")}})},radiowaihu:function(t){for(var e=0;e<this.items.length;e++)if(this.items[e].value===t.target.value){this.current=e;break}},radiotinghu:function(t){for(var e=0;e<this.items1.length;e++)if(this.items1[e].value===t.target.value){this.current1=e;break}},radiochonghu:function(t){for(var e=0;e<this.items2.length;e++)if(this.items2[e].value===t.target.value){this.current2=e;break}},bindTextAreaBlur:function(t){console.log(t.detail.value)},bindDateChange:function(t){this.date=t.target.value,console.log(t.target.value)},getDate:function(t){var e=new Date,n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return"start"===t?n-=60:"end"===t&&(n+=2),a=a>9?a:"0"+a,i=i>9?i:"0"+i,"".concat(n,"-").concat(a,"-").concat(i)},getCurrentDate:function(){var t=(0,a.default)().format("YYYY-MM-DD hh:mm:ss");return console.log(t,"dddd"),t}}};e.default=o}).call(this,n("543d")["default"])},f13e:function(t,e,n){"use strict";n.r(e);var a=n("60db"),i=n("3ba5");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("6fb0");var o=n("2877"),l=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=l.exports}},[["1024","common/runtime","common/vendor"]]]);